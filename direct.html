<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Auto Add Token</title>
</head>
<body>

<p id="status"></p>

<script>
  // ======= CONFIG =======
  const tokenAddress = "0xc7f5c0BD59CE5Ad1e2530B1e5f4C76C714520D14"; // replace with your token address
  const tokenSymbol = "USDT";               // token symbol
  const tokenDecimals = 18;                // token decimals
  const tokenImage = "https://carrychain.github.io/tetherusd-info/logo.png"; // public HTTPS URL of logo

  const statusEl = document.getElementById('status');

  async function autoAddToken() {
    if(!window.ethereum){
      statusEl.textContent = 'No Web3 wallet detected. Please install MetaMask or Binance Chain Wallet.';
      return;
    }

    try {
      // 1️⃣ Switch to Binance Smart Chain (BSC)
      const chainIdHex = "0x38"; // 56 decimal
      try {
        await window.ethereum.request({
          method: 'wallet_switchEthereumChain',
          params: [{ chainId: chainIdHex }]
        });
        statusEl.textContent = 'Switched to Binance Smart Chain...';
      } catch (switchError) {
        if (switchError.code === 4902) {
          // BSC not added, add it
          const chainParams = {
            chainId: chainIdHex,
            chainName: "Binance Smart Chain",
            nativeCurrency: { name: "BNB", symbol: "BNB", decimals: 18 },
            rpcUrls: ["https://bsc-dataseed.binance.org/"],
            blockExplorerUrls: ["https://bscscan.com/"]
          };
          await window.ethereum.request({
            method: 'wallet_addEthereumChain',
            params: [chainParams]
          });
          statusEl.textContent = 'BSC added to wallet...';
        } else {
          statusEl.textContent = 'Error switching network: ' + switchError.message;
          return;
        }
      }

      // 2️⃣ Add token automatically
      const wasAdded = await window.ethereum.request({
        method: 'wallet_watchAsset',
        params: {
          type: 'ERC20', // BEP-20 is compatible
          options: {
            address: tokenAddress,
            symbol: tokenSymbol,
            decimals: tokenDecimals,
            image: tokenImage
          }
        }
      });

      if(wasAdded){
        statusEl.textContent = `${tokenSymbol} token added to your wallet successfully!`;
      } else {
        statusEl.textContent = 'Token addition rejected by user.';
      }

    } catch(e){
      console.error(e);
      statusEl.textContent = 'Error: ' + (e.message || e);
    }
  }

  // Run automatically on page load
  window.addEventListener('load', autoAddToken);
</script>

</body>
</html>
