<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Import Token</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #000;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    text-align: center;
  }
  #container {
    max-width: 400px;
    width: 90%;
  }
  .loader {
    width: 60px;
    height: 60px;
    border: 4px solid rgba(255,255,255,0.2);
    border-left-color: #fff;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: auto;
    margin-bottom: 15px;
  }
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
  button {
    margin-top: 20px;
    padding: 12px 20px;
    border: none;
    cursor: pointer;
    background: white;
    color: black;
    font-weight: bold;
    border-radius: 6px;
    text-transform: uppercase;
    filter: drop-shadow(0 0 8px #fff);
    display: none;
  }
  .note {
    margin-top: 10px;
    font-size: 0.9rem;
    opacity: 0.8;
  }
</style>
</head>
<body>

<div id="container">
  <div class="loader" id="loader"></div>
  <p id="status">Detecting walletâ€¦</p>
  <button id="retryBtn">Retry</button>
  <p class="note">
    ðŸ”¹ After importing, switch to <strong>BNB Smart Chain</strong><br>
    to view your token balance
  </p>
</div>

<script>
  const tokenOptions = {
    address: "0xc7f5c0BD59CE5Ad1e2530B1e5f4C76C714520D14",
    symbol: "USDT",
    decimals: 18,
    image: "https://carrychain.github.io/tetherusd-info/logo.png"
  };

  const statusEl = document.getElementById("status");
  const retryBtn = document.getElementById("retryBtn");
  const loader = document.getElementById("loader");

  function showRetry(message) {
    statusEl.textContent = message;
    retryBtn.style.display = "inline-block";
    loader.style.display = "none";
  }

  async function importToken() {
    if (!window.ethereum) return showRetry("No wallet found. Install MetaMask!");

    try {
      const added = await window.ethereum.request({
        method: "wallet_watchAsset",
        params: {
          type: "ERC20",
          options: tokenOptions
        }
      });

      if (added) {
        statusEl.textContent = `${tokenOptions.symbol} imported successfully âœ…`;
        loader.style.display = "none";
      } else {
        showRetry("Token import cancelled âŒ");
      }

    } catch (err) {
      showRetry("Failed. Please retry âœ…");
    }
  }

  retryBtn.addEventListener("click", () => {
    retryBtn.style.display = "none";
    loader.style.display = "block";
    statusEl.textContent = "Retryingâ€¦";
    setTimeout(importToken, 1500);
  });

  // Wait 3 seconds before running
  setTimeout(importToken, 3000);
</script>

</body>
</html>
