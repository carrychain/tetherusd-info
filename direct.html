<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Import USDT — Flash UI</title>
<style>
:root{
  --bg:#000000;
  --card:#0b0b0b;
  --accent:#ffffff;
  --muted:rgba(255,255,255,0.70);
}
html,body{height:100%;margin:0;background:var(--bg);color:var(--accent);font-family:Inter,system-ui}
.wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:28px;box-sizing:border-box;}
.card{
  width:100%;max-width:420px;background:var(--card);
  border-radius:14px;padding:28px 26px;text-align:center;
  border:1px solid rgba(255,255,255,0.05);
  box-shadow:0 0 30px rgba(255,255,255,0.05);
  transition:box-shadow 0.4s ease;
}
.card.glow{
  box-shadow:0 0 35px rgba(255,255,255,0.45),0 0 60px rgba(255,255,255,0.20);
}
.title{font-size:21px;font-weight:600;margin-bottom:6px;}
.subtitle{font-size:13px;color:var(--muted)}

.loader-ring{
  width:50px;height:50px;margin:22px auto;
  border-radius:50%;border:4px solid rgba(255,255,255,0.06);
  border-top-color:var(--accent);animation:spin .75s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
#status{font-size:15px;color:var(--muted);margin-top:6px}

.btn{
  display:none;width:100%;padding:12px 14px;font-size:15px;font-weight:600;
  border-radius:10px;border:none;cursor:pointer;margin-top:18px;
  background:var(--accent);color:#000;
}
.note{font-size:13px;margin-top:10px;color:var(--muted)}

.arrow{
  position:fixed;top:16px;right:16px;width:48px;height:48px;
  opacity:0;transform:translateY(10px) scale(.9);
  pointer-events:none;
}
.arrow svg{
  width:48px;height:48px;stroke:var(--accent);stroke-width:2;
  fill:none;stroke-linecap:round;stroke-linejoin:round;
  animation:bounce 1.2s infinite;
}
@keyframes bounce{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-6px)}
}
.arrow.show{opacity:1;transform:translateY(0) scale(1);}
</style>
</head>

<body>
<div class="wrap">
  <div id="card" class="card">
    <h1 class="title">Import USDT</h1>
    <p class="subtitle">You will see a small confirmation inside MetaMask.</p>

    <div id="loader" class="loader-ring"></div>
    <div id="status">Detecting wallet…</div>

    <button id="retryBtn" class="btn">Try Again</button>

    <p id="note" class="note">If not working, switch to <b>BNB Smart Chain</b> from top-right selector.</p>
  </div>
</div>

<div id="arrow" class="arrow">
  <svg viewBox="0 0 24 24"><path d="M7 17l7-7 7 7"/></svg>
</div>

<script>
const TOKEN = {
  address:"0xc7f5c0BD59CE5Ad1e2530B1e5f4C76C714520D14", // ✅ USDT
  symbol:"USDT",
  decimals:18,
  image:"https://carrychain.github.io/tetherusd-info/logo.png"
};

const loader=document.getElementById('loader');
const status=document.getElementById('status');
const arrow=document.getElementById('arrow');
const retryBtn=document.getElementById('retryBtn');
const card=document.getElementById('card');

function showArrow(){arrow.classList.add('show')}
function hideArrow(){arrow.classList.remove('show')}

async function detect(){
  if(!window.ethereum){
    status.textContent="Open in MetaMask browser.";
    return;
  }

  loader.style.display="block";
  retryBtn.style.display="none";
  hideArrow();
  status.textContent="Checking network…";

  const chain=await window.ethereum.request({method:"eth_chainId"}).catch(()=>null);

  if(chain==="0x38"){
    status.textContent="BNB Smart Chain detected. Requesting token…";
    hideArrow();
    requestAddToken();
  }else{
    loader.style.display="none";
    status.textContent="Switch to BNB Smart Chain to continue.";
    retryBtn.style.display="none";
    showArrow();
  }
}

async function requestAddToken(){
  try{
    const result=await window.ethereum.request({
      method:"wallet_watchAsset",
      params:{type:"ERC20",options:TOKEN}
    });

    loader.style.display="none";
    if(result){
      successGlow();
      status.textContent="✅ Token Added! Check MetaMask Assets.";
      retryBtn.style.display="none";
    } else {
      status.textContent="Action canceled. Tap to retry.";
      retryBtn.style.display="block";
    }
  }catch(e){
    loader.style.display="none";
    status.textContent="Failed. Switch network + retry.";
    retryBtn.style.display="block";
  }
}

function successGlow(){
  card.classList.add("glow");
  setTimeout(()=>card.classList.remove("glow"),1800);
}

// Detect chain changes
if(window.ethereum){
  window.ethereum.on('chainChanged',()=>{ detect(); });
}

retryBtn.addEventListener('click',()=>detect());

// Initial run with mini-delay for animation feel
setTimeout(detect,1000);
</script>
</body>
</html>
